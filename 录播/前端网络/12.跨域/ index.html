<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!-- <img src="https://www.baidu.com" alt=""> -->
    <pre style="font-size: 20px; color: red;">
    </pre>
    <!-- <form action="http://www.baidu.com" method="post">
        <label for="name">用户名</label>
        <input type="text" id="name" name="name">
        <label for="password">密码</label>
        <input type="password" id="password" name="password">
        <input type="submit">
    </form> -->
    <!-- <iframe src="http://www.baidu.com" frameborder="0"></iframe> -->
    <script>
        //         跨域访问资源
        // 哪些东⻄属于资源？
        // js⽂件算吗？js⽂件肯定是算资源的，但是js⽂件是允许被跨域请求的。
        // css⽂件，jpg,png等。src属性的资源都是可以被跨域请求的。href资源⼤部分都是可以被
        // 跨域请求的。
        // 哪些资源算跨域请求的资源？
        // 1. 后端接⼝的数据。
        // 2. 其它域的cookie 
        // 3. 其它域的缓存
        // 什么是其它的域？怎么样算跨域？
        // ⻚⾯本身：有协议（http/https）,域名，端⼝
        // 要请求的数据：http://www.baidu.com:80        不写端口号就是默认端口号
        // 协议，域名，端⼝这三个，有任意⼀个不⼀样就算跨域
        //         跨域这个⾏为，发⽣在哪⾥？
        // 答案：
        // 1. 即使跨域了（协议，域名，端⼝号有不⼀样的），请求也可以发出。
        // 2. 服务器端也是可以接收的。
        // 3. 服务器端也是可以正常处理的。
        // 4. 服务器端也是可以正常返回数据。
        // 5. 浏览器也能接收到这些数据。
        // 6. 接收到之后，发现当前⻚⾯的域和请求的域不同，所以判定为跨域。
        // 7. 我们的代码在这等着结果呢，但是因为浏览器判定跨域了，不会把结果传递给我们的代码。
        // 虽然跨域了，但是我们依然需要这个数据，怎么办？
        // 解决跨域问题：
        // 1. 后端（别⼈家的）配合我们进⾏跨域。
        //  pan.baidu.com ——> zhidao.baidu.com
        //  （1）JSONP（正常的情况，返回的数据都是JSON格式。JSONP是⼀种特殊的格式。）
        //  （2）后端设置Access-Control-Allow-Origin属性以⽀持跨域。（聊天机器⼈课讲，因为需
        // 要nodejs）
        // 2. 后端不配合我们进⾏跨域。
        //  （3）iframe（只能显示，不能控制）
        //  （4）通过后端代理（⾃⼰的后端）（后⾯聊天机器⼈讲，因为需要nodejs

        // 接口：http://developer.duyiedu.com/edu/testAjaxCrossOrigin
        // http://developer.duyiedu.com/edu/testAjax


        //1. 在浏览器中直接输入网址（无法用代码控制）
        //2. location.href="url",可以发出网络请求，但是页面会发生跳转。(页面会跳转)
        //3. 带有src属性的标签。请求是可以发出的，服务端是可以处理的也是可以返回的。但是返回之后，能否被应用，还要看浏览器。(页面无法处理返回结果)
        //4. 带有href属性的标签。请求是可以发出的，服务端是可以处理的也是可以返回的。但是返回之后，能否被应用，还要看浏览器。（页面无法处理返回结果）
        //5. 带有action属性的标签。例如form表单，也可以向后端发出请求。但是form表单发出请求之后，也会页面跳转。（页面会跳转）
        // 希望有一种方式，可以用代码控制，页面不会跳转，服务端返回的结果我可以用js继续处理。
        //6. ajax

        //要素
        //(1)请求方式，get,post
        //(2)url
        // var xhr = null;
        // if (window.XMLHttpRequest) {
        //     xhr = new XMLHttpRequest();
        // } else {
        //     xhr = new ActiveXObject("Microsoft.XMLHttp"); 
        // }
        // xhr.open("get", "http://developer.duyiedu.com/edu/testAjaxCrossOrigin");
        // xhr.send();



        // ajax
        var xhr = null;
        if (window.XMLHttpRequest) {
            xhr = new XMLHttpRequest;
        } else {
            xhr = new ActiveXObject("Microsoft.XMLHttp");
        }
        console.log(xhr.readyState);
        // 三个参数         true / false    异步 / 同步    表示同步或者异步
        xhr.open("get", "http://developer.duyiedu.com/edu/testAjaxCrossOrigin", true);
        console.log(xhr.readyState);
        console.log(xhr.readyState);
        // onreadystatechange
        xhr.onreadystatechange = function () {
            // readyState == 4 请求已完成 
            // status == 200 请求结果已经返回 成功
            // 1**	信息，服务器收到请求，需要请求者继续执行操作
            // 2**	成功，操作被成功接收并处理
            // 3**	重定向，需要进一步的操作以完成请求
            // 4**	客户端错误，请求包含语法错误或无法完成请求
            // 5**	服务器错误，服务器在处理请求的过程中发生了错误
            console.log(xhr.readyState);
            if (xhr.readyState == 4 && xhr.status == 200) {
                // responseText
                console.log(xhr.responseText);
                console.log(JSON.parse(xhr.responseText));
            }
        }
        xhr.send();  // 发送
        console.log("=====");



        // 
    </script>
</body>

</html>